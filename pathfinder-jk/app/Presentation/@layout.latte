<!DOCTYPE html>
<html lang="cs" class="scroll-smooth">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>{ifset title}{include title|stripHtml} | {/ifset}Jižní Kříž Pathfinder</title>

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="{$basePath}/css/style.css">

	{asset? 'main.js'}

	<style>
		:root {
			--bg-primary: #f8fafc;
			--bg-secondary: #ffffff;
			--text-primary: #1f2937;
			--text-secondary: #4b5563;
		}

		.dark {
			--bg-primary: #0f172a;
			--bg-secondary: #1e293b;
			--text-primary: #f1f5f9;
			--text-secondary: #94a3b8;
		}

		body {
			background-color: var(--bg-primary);
			color: var(--text-primary);
			transition: background-color 0.3s, color 0.3s;
			min-width: 250px;
		}

		.nav-font {
			font-family: 'Oswald', sans-serif;
			letter-spacing: 0.05em;
		}

		/* Custom scrollbar - subtle white */
		::-webkit-scrollbar {
			width: 10px;
		}
		::-webkit-scrollbar-track {
			background: rgba(0, 0, 0, 0.05);
		}
		::-webkit-scrollbar-thumb {
			background: rgba(0, 0, 0, 0.15);
			border-radius: 5px;
		}
		::-webkit-scrollbar-thumb:hover {
			background: rgba(0, 0, 0, 0.25);
		}

		/* Dark mode toggle */
		/* VELIKOST TOGGLE: změň width a height pro změnu velikosti */
		.toggle-switch {
			width: 100px;
			height: 54px;
			background: linear-gradient(135deg, #cbd5e1 0%, #94a3b8 100%);
			border-radius: 27px;
			position: relative;
			cursor: pointer;
			transition: background 0.3s;
		}

		.dark .toggle-switch {
			background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
		}

		.toggle-switch::before {
			content: '';
			position: absolute;
			width: 44px;
			height: 44px;
			background: white;
			border-radius: 50%;
			top: 5px;
			left: 5px;
			transition: transform 0.3s;
			box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
		}

		.dark .toggle-switch::before {
			transform: translateX(46px);
		}

		.toggle-switch .icon-sun,
		.toggle-switch .icon-moon {
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			width: 28px;
			height: 28px;
			transition: opacity 0.3s;
		}

		.toggle-switch .icon-sun {
			left: 13px;
			opacity: 1;
		}

		.toggle-switch .icon-moon {
			right: 13px;
			opacity: 0.5;
		}

		.dark .toggle-switch .icon-sun {
			opacity: 0.5;
		}

		.dark .toggle-switch .icon-moon {
			opacity: 1;
		}

		/* Logo ring */
		.logo-ring {
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
			transition: transform 0.3s ease, box-shadow 0.3s ease;
		}

		.logo-ring:hover {
			transform: scale(1.1) rotate(5deg);
			box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
		}

		/* Responzivní navbar */
		.desktop-nav {
			display: none;
		}
		.mobile-menu-btn {
			display: block;
		}
		#navbar {
			margin-left: 16px !important;
			margin-right: 16px !important;
		}
		#navbar > div:first-child {
			height: 80px !important;
			padding-left: 16px !important;
			padding-right: 16px !important;
		}
		#navbar-logo {
			width: 100px !important;
			height: 100px !important;
		}
		#logo-link .logo-ring {
			padding: 6px;
		}
		#logo-link .logo-ring > div {
			padding: 4px;
		}

		/* Mobile menu animace */
		@media (max-width: 1023px) {
			#logo-link {
				top: 40px !important;
				transform: translate(-50%, -50%) !important;
				transition: left 1.5s cubic-bezier(0.4, 0, 0.2, 1), transform 1.5s cubic-bezier(0.4, 0, 0.2, 1);
			}

			#logo-link.logo-moved {
				left: 90px !important;
				transform: translate(-50%, -50%) rotate(-360deg) !important;
			}
		}

		.mobile-menu-closed {
			max-height: 0;
			overflow: hidden;
			opacity: 0;
			transition: max-height 1.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 1s ease;
		}

		.mobile-menu-open {
			max-height: 600px;
			overflow: hidden;
			opacity: 1;
			transition: max-height 1.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 1s ease;
			padding-bottom: 24px;
			border-top: 1px solid #f3f4f6;
			margin: 0 16px;
		}

		.mobile-menu-links {
			display: flex;
			flex-direction: column;
			gap: 4px;
			padding-top: 16px;
			align-items: center;
		}

		.mobile-link {
			padding: 12px 24px;
			border-radius: 8px;
			color: #374151;
			font-size: 1.25rem;
			font-weight: 600;
			text-align: center;
			transition: background-color 0.2s, color 0.2s;
		}

		.mobile-link:hover {
			background-color: rgba(0, 117, 181, 0.1);
			color: #0075b5;
		}

		.mobile-menu-footer {
			padding-top: 16px;
			margin-top: 16px;
			border-top: 1px solid #f3f4f6;
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding-left: 16px;
			padding-right: 16px;
			width: 100%;
			box-sizing: border-box;
		}

		.mobile-btn {
			padding: 12px 24px;
			background-color: #f3f4f6;
			color: #374151;
			font-weight: 600;
			border-radius: 12px;
			font-size: 1.125rem;
			transition: background-color 0.2s;
		}

		.mobile-btn:hover {
			background-color: #e5e7eb;
		}

		.mobile-btn-primary {
			background-color: #005a8c;
			color: white;
		}

		.mobile-btn-primary:hover {
			background-color: #004a73;
		}

		@media (min-width: 1024px) {
			.desktop-nav {
				display: flex;
			}
			.mobile-menu-btn {
				display: none;
			}
			#navbar {
				margin-left: clamp(16px, 2vw, 48px) !important;
				margin-right: clamp(16px, 2vw, 48px) !important;
			}
			#navbar > div:first-child {
				height: clamp(70px, 6vw, 120px) !important;
				padding-left: clamp(12px, 1.5vw, 40px) !important;
				padding-right: clamp(12px, 1.5vw, 40px) !important;
			}
			#navbar-logo {
				width: clamp(80px, 7vw, 144px) !important;
				height: clamp(80px, 7vw, 144px) !important;
			}
			#logo-link .logo-ring {
				padding: clamp(4px, 0.4vw, 8px);
			}
			#logo-link .logo-ring > div {
				padding: clamp(3px, 0.3vw, 6px);
			}
			/* Responzivní text v navbaru */
			.desktop-nav a {
				font-size: clamp(0.75rem, 1.3vw, 1.875rem) !important;
				white-space: nowrap;
			}
			/* Responzivní mezery mezi odkazy */
			.desktop-nav {
				gap: clamp(10px, 3.7vw, 140px) !important;
			}
			/* Odsazení levých odkazů od okraje */
			.desktop-nav:first-of-type {
				margin-left: clamp(10px, 1.5vw, 30px) !important;
			}
			/* Logo spacer */
			.logo-spacer {
				width: clamp(80px, 8vw, 200px) !important;
			}
			/* Pravá strana odkazů - margin od loga a menší gap */
			.desktop-nav-right {
				margin-left: clamp(40px, 8vw, 250px) !important;
				gap: clamp(10px, 3vw, 250px) !important;
				margin-right: clamp(10px, 1.5vw, 200px) !important;
			}
			/* Akce sekce - gap mezi toggle a tlačítkem */
			.desktop-nav-actions {
				gap: clamp(8px, 1vw, 200px) !important;
			}
			/* Responzivní toggle switch */
			.desktop-nav-actions .toggle-switch {
				transform: scale(1);
				transform-origin: center;
			}
		}

		/* Menší toggle a tlačítko na užších obrazovkách */
		@media (min-width: 1024px) and (max-width: 1400px) {
			.desktop-nav-actions .toggle-switch {
				transform: scale(0.75);
			}
		}

		@media (min-width: 1024px) and (max-width: 1200px) {
			.desktop-nav-actions .toggle-switch {
				transform: scale(0.65);
			}
		}

		/* Tlačítko přihlásit/odhlásit - vždy na desktopu */
		@media (min-width: 1024px) {
			.nav-btn {
				font-size: clamp(0.65rem, 0.9vw, 1.5rem) !important;
				padding: clamp(4px, 0.5vw, 12px) clamp(8px, 1vw, 32px) !important;
				margin-right: clamp(4px, 0.5vw, 20px) !important;
			}
		}

		@keyframes fade-in {
			from { opacity: 0; transform: translateY(-10px); }
			to { opacity: 1; transform: translateY(0); }
		}
		.animate-fade-in {
			animation: fade-in 0.3s ease-out;
		}

		/* Dark mode color adjustments */
		.dark .text-gray-700 { color: #e2e8f0; }
		.dark .text-gray-600 { color: #cbd5e1; }
		.dark .text-gray-500 { color: #94a3b8; }
		.dark .text-gray-400 { color: #94a3b8; }
		.dark .bg-white { background-color: #1e293b; }
		.dark .bg-white\/95 { background-color: rgba(30, 41, 59, 0.95); }
		.dark .bg-gray-50 { background-color: #0f172a; }
		.dark .bg-gray-100 { background-color: #334155; }
		.dark .border-gray-100 { border-color: #334155; }
		.dark .border-gray-200 { border-color: #475569; }
	</style>
</head>

<body class="min-h-screen flex flex-col">
	{* Navbar Component *}
	{control navbar}

	{* Flash messages *}
	{if $flashes}
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4 relative z-40">
			{foreach $flashes as $flash}
				<div class="mb-2 px-4 py-3 rounded-xl border shadow-sm animate-fade-in
					{if $flash->type === 'success'}bg-green-50 border-green-200 text-green-800{/if}
					{if $flash->type === 'error'}bg-red-50 border-red-200 text-red-800{/if}
					{if $flash->type === 'warning'}bg-yellow-50 border-yellow-200 text-yellow-800{/if}
					{if $flash->type === 'info'}bg-blue-50 border-blue-200 text-blue-800{/if}
				">
					{$flash->message}
				</div>
			{/foreach}
		</div>
	{/if}

	{* Main content *}
	<main class="flex-grow relative z-10">
		{include content}
	</main>

	{* Footer *}
	<footer class="bg-gray-900 text-gray-300 relative z-10">
		<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
			<div class="grid md:grid-cols-3 gap-8">
				<div>
					<div class="flex items-center space-x-3 mb-4">
						<div class="rounded-full p-1 bg-gradient-to-br from-amber-400 to-yellow-500">
							<div class="bg-gray-900 rounded-full p-0.5">
								<img
									src="{$basePath}/images/logo.png"
									alt="Jižní Kříž"
									class="h-10 w-10 object-contain rounded-full"
									onerror="this.onerror=null; this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2245%22 fill=%22%230075b5%22/><text x=%2250%22 y=%2260%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2230%22 font-weight=%22bold%22>JK</text></svg>';"
								>
							</div>
						</div>
						<span class="text-xl font-bold text-white">Jižní Kříž</span>
					</div>
					<p class="text-gray-400">Oblast Klubu Pathfinder pro mladé dobrodruhy.</p>
				</div>

				<div>
					<h4 class="text-white font-semibold mb-4">Rychlé odkazy</h4>
					<ul class="space-y-2">
						<li><a n:href="Home:" class="text-gray-400 hover:text-white transition-colors">Domů</a></li>
						<li><a n:href="Home:#akce" class="text-gray-400 hover:text-white transition-colors">Akce</a></li>
						<li><a href="#" class="text-gray-400 hover:text-white transition-colors">O nás</a></li>
						<li><a href="#" class="text-gray-400 hover:text-white transition-colors">Kontakt</a></li>
					</ul>
				</div>

				<div>
					<h4 class="text-white font-semibold mb-4">Kontakt</h4>
					<ul class="space-y-2 text-gray-400">
						<li class="flex items-center">
							<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
							</svg>
							info@jiznkriz.cz
						</li>
					</ul>
				</div>
			</div>

			<div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-500 text-sm">
				&copy; {date('Y')} Jižní Kříž Pathfinder. Všechna práva vyhrazena.
			</div>
		</div>
	</footer>

	<script>
		// Dark mode toggle
		function toggleDarkMode() {
			document.documentElement.classList.toggle('dark');
			localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
		}

		// Load saved preference
		if (localStorage.getItem('darkMode') === 'true') {
			document.documentElement.classList.add('dark');
		}
	</script>
</body>
</html>
